PS C:\Users\user\Desktop\opensearch-lab> python plugin_test_knn.py
🎯 OpenSearch KNN 플러그인 상세 테스트
============================================================
✅ OpenSearch 버전: 2.13.0

=== 📋 KNN 인덱스 생성 테스트 ===
   ✅ 5차원 L2 거리 인덱스 생성 성공
      KNN 활성화: true
   ✅ 50차원 코사인 유사도 인덱스 생성 성공
      KNN 활성화: true
   ❌ 128차원 L1 거리 인덱스 생성 실패: RequestError(400, 'mapper_parsing_exception', 'Failed to parse mapping [_doc]: Validation Failed: 1: "hnsw" configuration does not support space type: "l1".;')

📊 벡터 테스트 데이터 생성
   ✅ 문서 데이터 생성: 11개

=== 🔍 기본 KNN 검색 테스트 ===

📋 1. 기본 벡터 유사도 검색
   ✅ 기본 KNN 검색 성공
   📊 검색 결과 (기술 문서 유사도):
      1. Python 프로그래밍 기초 (기술)
         유사도: 0.9936, 저자: 김개발
      2. Java 객체지향 프로그래밍 (기술)
         유사도: 0.9921, 저자: 이코딩
      3. 웹 개발 프레임워크 (기술)
         유사도: 0.9852, 저자: 박웹
      4. 마케팅 전략 수립 (비즈니스)
         유사도: 0.6489, 저자: 최마케팅
      5. 재무 관리 기법 (비즈니스)
         유사도: 0.6424, 저자: 정재무

📋 2. 비즈니스 문서 유사도 검색
   ✅ 비즈니스 카테고리 KNN 검색 성공
   📊 검색 결과:
      1. 재무 관리 기법 (비즈니스)
         유사도: 0.9952
      2. 마케팅 전략 수립 (비즈니스)
         유사도: 0.9887
      3. 인사 관리 시스템 (비즈니스)
         유사도: 0.9742

=== 🔥 필터링된 KNN 검색 테스트 ===

📋 1. 카테고리 필터 + 벡터 검색
   ✅ 카테고리 필터링된 KNN 검색 성공
   📊 '기술' 카테고리 내에서만 검색:
      - 웹 개발 프레임워크 (유사도: 0.8499)
      - Java 객체지향 프로그래밍 (유사도: 0.8250)
      - Python 프로그래밍 기초 (유사도: 0.8155)

📋 2. 날짜 범위 필터 + 벡터 검색
   ✅ 날짜 범위 필터링된 KNN 검색 성공
   📊 2024년 2월 문서만 검색:
      - 통계학 응용 (2024-02-20)
        유사도: 0.8545
      - 웹 개발 프레임워크 (2024-02-01)
        유사도: 0.8499
      - 인사 관리 시스템 (2024-02-15)
        유사도: 0.8328
      - 데이터 과학 방법론 (2024-02-05)
        유사도: 0.8323
      - 재무 관리 기법 (2024-02-10)
        유사도: 0.8038

📋 3. 복합 조건 필터 + 벡터 검색
   ✅ 복합 필터링된 KNN 검색 성공
   📊 기술/연구 카테고리 + 1월15일 이후:
      - 통계학 응용 (연구)
        유사도: 0.8545
      - 웹 개발 프레임워크 (기술)
        유사도: 0.8499
      - AI 알고리즘 연구 (연구)
        유사도: 0.8323

=== 📐 거리 메트릭별 테스트 ===

   ✅ 유클리드 거리 (L2) 테스트 성공
      검색 시간: 54.98ms
      검색 결과:
        - 벡터1: 점수 1.0000
        - 벡터2: 점수 0.9259
        - 벡터5: 점수 0.3333

   ✅ 코사인 유사도 테스트 성공
      검색 시간: 58.71ms
      검색 결과:
        - 벡터1: 점수 1.0000
        - 벡터2: 점수 0.9851
        - 벡터5: 점수 0.5000
   ❌ 맨해튼 거리 (L1) 테스트 오류: RequestError(400, 'mapper_parsing_exception', 'Failed to parse mapping [_doc]: Validation Failed: 1: "hnsw" configuration does not support space type: "l1".;')

=== ⚡ 고차원 벡터 성능 테스트 ===

   📊 50차원 벡터 데이터 생성 중...
   ✅ 50차원 벡터 검색 성공
      검색 시간: 49.58ms
      검색된 문서: 5개
      최고 유사도: 0.9171 (doc_010)

   📊 128차원 벡터 데이터 생성 중...
   ✅ 128차원 벡터 검색 성공
      검색 시간: 59.40ms
      검색된 문서: 5개
      최고 유사도: 0.8975 (doc_009)

   📊 256차원 벡터 데이터 생성 중...
   ✅ 256차원 벡터 검색 성공
      검색 시간: 60.40ms
      검색된 문서: 5개
      최고 유사도: 0.8911 (doc_007)

======================================================================
📊 KNN 플러그인 테스트 결과 요약
======================================================================

🔧 지원 기능 (12개):
    1. 5차원 l2 거리
    2. 50차원 cosinesimil 거리
    3. K-최근접 이웃 벡터 검색
    4. 카테고리별 유사도 검색
    5. 카테고리 필터 + KNN
    6. 날짜 범위 필터 + KNN
    7. 복합 조건 필터 + KNN
    8. 유클리드 거리 (L2)
    9. 코사인 유사도
   10. 50차원 벡터 검색
   11. 128차원 벡터 검색
   12. 256차원 벡터 검색

🧪 테스트 결과:
   ✅ 50차원: 성공 (49.58ms)
   ✅ 128차원: 성공 (59.40ms)
   ✅ 256차원: 성공 (60.40ms)

📈 성공률: 100.0% (3/3)

💡 KNN 플러그인 활용 방안:
    1. 문서 유사도 검색 (텍스트 임베딩 기반)
    2. 상품 추천 시스템 (고객/상품 특성 벡터)
    3. 이미지 검색 (이미지 특성 벡터)
    4. 고객 세분화 (고객 행동 패턴 벡터)
    5. 이상 탐지 (정상 패턴과의 거리 측정)
    6. 의미론적 검색 (자연어 의미 유사성)
    7. 추천 엔진 구축 (협업 필터링)
    8. 클러스터링 및 분류 작업
    9. 얼굴 인식 및 생체 인증
   10. 음성 인식 및 오디오 검색

🌐 다음 단계:
   1. 실제 텍스트 임베딩 모델과 연동
   2. 대용량 벡터 데이터 성능 최적화
   3. 하이브리드 검색 (키워드 + 벡터) 구현
   4. 실시간 추천 시스템 구축

💻 생성된 테스트 인덱스:
   • knn-test-small: 5차원 L2 거리
   • knn-test-medium: 50차원 코사인 유사도
   • knn-test-large: 128차원 L1 거리
   • knn-documents: 문서 유사도 검색용 (11개 문서)